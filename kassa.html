<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Targenia - Kassa</title>
<style>
body{font-family:Arial;background:#1f1f2e;color:#fff;margin:0;padding:20px}
header{background:#2c2c44;padding:20px;text-align:center;font-size:2em;font-weight:bold;border-radius:12px}
.container{max-width:600px;margin:auto}
.cart-item{background:#2c2c44;padding:10px;margin:8px 0;border-radius:8px;display:flex;justify-content:space-between}
input,select,textarea,button{width:100%;padding:8px;margin:6px 0;border-radius:6px;border:none}
button{background:#1dd1a1;color:#000;font-weight:bold;cursor:pointer}
</style>
</head>
<body>
<header>Kundvagn & Kassa</header>
<div class="container">
  <h2>Produkter</h2>
  <div id="cartItems"></div>
  
  <h2>Fyll i uppgifter</h2>
  <input id="firstName" placeholder="Förnamn">
  <input id="lastName" placeholder="Efternamn">
  <input id="minecraftName" placeholder="Minecraft-användarnamn">
  <input id="address" placeholder="Adress">
  <input id="publicAccount" placeholder="Public Account Number">
  <input id="secretKey" placeholder="Secret Key">
  <select id="homeDelivery">
    <option value="nej">Hemleverans: Nej</option>
    <option value="ja">Hemleverans: Ja (+10%)</option>
  </select>
  <select id="expressDelivery">
    <option value="nej">Expressleverans: Nej</option>
    <option value="ja">Expressleverans: Ja (+20%)</option>
  </select>
  <textarea id="notes" placeholder="Anteckningar (Frivilligt)"></textarea>
  
  <button onclick="checkout()">Betala</button>
</div>

<script>
let cart = JSON.parse(localStorage.getItem("cart")) || {};

function renderCart(){
  const container = document.getElementById("cartItems");
  container.innerHTML="";
  for(const key in cart){
    container.innerHTML += `<div class="cart-item"><span>${key}</span><span>${cart[key]} st</span></div>`;
  }
}

function checkout(){
  if(Object.keys(cart).length===0){ alert("Din kundvagn är tom"); return; }
  const orderNumber = 'ORD'+Math.floor(Math.random()*1000000);
  const order = {
    orderNumber,
    items: cart,
    firstName: document.getElementById("firstName").value,
    lastName: document.getElementById("lastName").value,
    minecraftName: document.getElementById("minecraftName").value,
    address: document.getElementById("address").value,
    publicAccount: document.getElementById("publicAccount").value,
    secretKey: document.getElementById("secretKey").value,
    homeDelivery: document.getElementById("homeDelivery").value,
    expressDelivery: document.getElementById("expressDelivery").value,
    notes: document.getElementById("notes").value
  };
  // Spara order i localStorage
  let orders = JSON.parse(localStorage.getItem("orders")) || [];
  orders.push(order);
  localStorage.setItem("orders",JSON.stringify(orders));
  
  alert("Betalt! Spara ditt ordernummer: "+orderNumber);
  localStorage.removeItem("cart");
  window.location.href="index.html";
}

renderCart();
</script>
</body>
</html>
