<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Targenia - Butik</title>
<style>
  body { font-family: Arial,sans-serif; background:#1f1f2e; color:#fff; margin:0; padding:0; }
  header { background:#2c2c44; padding:20px; text-align:center; font-size:2em; font-weight:bold; }
  header input { margin-top:10px; padding:6px; border-radius:6px; border:none; width:80%; font-size:1em; }
  main { display:flex; flex-wrap:wrap; justify-content:center; gap:20px; padding:20px; }
  .product { background:#2c2c44; border-radius:12px; width:180px; padding:15px; text-align:center; }
  .product img { width:100px; height:100px; object-fit:contain; margin-bottom:5px; }
  .product button { background:#ff6b6b; border:none; color:#fff; padding:6px 10px; border-radius:6px; cursor:pointer; }
  .product button:disabled { background:#555; cursor:not-allowed; }
  #cart { position:fixed; right:20px; top:80px; width:300px; background:#2c2c44; padding:15px; border-radius:12px; max-height:80vh; overflow-y:auto; }
  #cart h2 { margin-top:0; text-align:center; }
  #cart ul { list-style:none; padding:0; }
  #cart li { display:flex; justify-content:space-between; margin:6px 0; }
  #cart li button { padding:2px 6px; }
  button#checkout { background:#1dd1a1; margin-top:8px; cursor:pointer; width:100%; border-radius:6px; border:none; padding:8px; }
</style>
</head>
<body>

<header>
  Targenia
  <br>
  <input type="text" id="search" placeholder="Sök produkter...">
</header>

<main id="products"></main>

<div id="cart">
  <h2>Kundvagn</h2>
  <ul id="cartList"></ul>
  <button id="checkout" type="button" onclick="goToCheckout()">Till kassan</button>
</div>

<form id="gfForm" action="https://docs.google.com/forms/d/e/1FAIpQLSdugl-7Ob1Au-Ggs0l4LooD-mcpaIaLVl3WqVlfR21WqKdAUfA/formResponse" method="GET" target="_blank" style="display:none;">
  <input type="hidden" name="entry.223413538" id="gfProducts">
</form>

<script>
const IMG_ITEM  = "https://raw.githubusercontent.com/InventivetalentDev/minecraft-assets/1.20.1/assets/minecraft/textures/item/";
const IMG_BLOCK = "https://raw.githubusercontent.com/InventivetalentDev/minecraft-assets/1.20.1/assets/minecraft/textures/block/";

// Funktion som körs när man klickar på "Till kassan"
function goToCheckout() {
  // Fyll hidden input med produkter (exempel, ändra efter din logik)
  const products = []; // här ska du fylla arrayen med dina produkter
  document.getElementById("gfProducts").value = products.join(", ");

  // Skicka formuläret manuellt
  document.getElementById("gfForm").submit();
}
const products = [
  // REDSTONE
  { name:"Grut", price:4, unit:"D/Stack", img: IMG_BLOCK+"gravel.png" },
  { name:"Tratt", price:10, unit:"D/Stack", img: IMG_ITEM+"hopper.png" },
  { name:"Slime", price:10, unit:"D/Stack", img: IMG_ITEM+"slime_ball.png" },
  { name:"Piston", price:10, unit:"D/Stack", img: IMG_BLOCK+"piston.png" },
  { name:"Redstoneblock", price:10, unit:"D/Stack", img: IMG_BLOCK+"redstone_block.png" },
  { name:"TNT", price:8, unit:"D/Stack", img: IMG_BLOCK+"tnt.png" },
  { name:"Dispenser", price:4, unit:"D/8st", img: IMG_BLOCK+"dispenser.png" },
  { name:"Dropper", price:4, unit:"D/8st", img: IMG_BLOCK+"dropper.png" },
  { name:"Redstonerepeterare", price:4, unit:"D/32st", img: IMG_ITEM+"repeater.png" },
  { name:"Redstonejämförare", price:8, unit:"D/st", img: IMG_ITEM+"comparator.png" },

  // BETONG
  { name:"Betong Vit", price:14, unit:"D/Stack", img: IMG_BLOCK+"white_concrete.png" },
  { name:"Betong Ljusgrå", price:14, unit:"D/Stack", img: IMG_BLOCK+"light_gray_concrete.png" },
  { name:"Betong Grå", price:14, unit:"D/Stack", img: IMG_BLOCK+"gray_concrete.png" },
  { name:"Betong Svart", price:14, unit:"D/Stack", img: IMG_BLOCK+"black_concrete.png" },
  { name:"Betong Brun", price:14, unit:"D/Stack", img: IMG_BLOCK+"brown_concrete.png" },
  { name:"Betong Ljusblå", price:14, unit:"D/Stack", img: IMG_BLOCK+"light_blue_concrete.png" },
  { name:"Betong Turkos", price:14, unit:"D/Stack", img: IMG_BLOCK+"cyan_concrete.png" },
  { name:"Betong Blå", price:14, unit:"D/Stack", img: IMG_BLOCK+"blue_concrete.png" },
  { name:"Betong Gul", price:14, unit:"D/Stack", img: IMG_BLOCK+"yellow_concrete.png" },
  { name:"Betong Orange", price:14, unit:"D/Stack", img: IMG_BLOCK+"orange_concrete.png" },
  { name:"Betong Röd", price:14, unit:"D/Stack", img: IMG_BLOCK+"red_concrete.png" },
  { name:"Betong Lime", price:14, unit:"D/Stack", img: IMG_BLOCK+"lime_concrete.png" },
  { name:"Betong Grön", price:14, unit:"D/Stack", img: IMG_BLOCK+"green_concrete.png" },
  { name:"Betong Rosa", price:14, unit:"D/Stack", img: IMG_BLOCK+"pink_concrete.png" },
  { name:"Betong Lila", price:14, unit:"D/Stack", img: IMG_BLOCK+"purple_concrete.png" },

  // TRÄ
  { name:"Trä Stammar (Vänligen skriv på anteckningar vilken sort du vill ha.)", price:26, unit:"D/Stack", img: IMG_BLOCK+"oak_log.png" },
  { name:"Vitträ", price:26, unit:"D/Stack", img: IMG_BLOCK+"birch_log" },

  // LAMPOR
  { name:"Lyktor", price:64, unit:"D/Stack", img: IMG_ITEM+"lantern.png" },
  { name:"Kedja", price:2, unit:"D/Stack", img: IMG_BLOCK+"chain.png" },
  { name:"Redstone Lampa", price:14, unit:"D/Stack", img: IMG_BLOCK+"redstone_lamp.png" },
  { name:"Glödsten", price:32, unit:"D/Stack", img: IMG_BLOCK+"glowstone.png" },

  // MAT
  { name:"Äpple", price:1, unit:"D/Stack", img: IMG_ITEM+"apple.png" },
  { name:"Guldäpple", price:32, unit:"D/2st", img: IMG_ITEM+"golden_apple.png" },
  { name:"Guld Morot", price:2, unit:"D/Stack", img: IMG_ITEM+"golden_carrot.png" },
  { name:"Morot", price:1, unit:"D/3Stacks", img: IMG_ITEM+"carrot.png" },
  { name:"Söta bär", price:2, unit:"D/Stack", img: IMG_ITEM+"sweet_berries.png" },
  { name:"Melon", price:1, unit:"D/Stack", img: IMG_ITEM+"melon_slice.png" },
  { name:"Vete", price:4, unit:"D/Stack", img: IMG_ITEM+"wheat.png" },
  { name:"Bröd", price:1, unit:"D/Stack", img: IMG_ITEM+"bread.png" },
  { name:"Höbal", price:6, unit:"D/Stack", img: IMG_BLOCK+"hay_block.png" },
  { name:"Kaka", price:2, unit:"D/4Stacks", img: IMG_ITEM+"cake.png" },
  { name:"Pumpapaj", price:1, unit:"D/Stack", img: IMG_ITEM+"pumpkin_pie.png" },
  { name:"Bakad potatis", price:1, unit:"D/Stack", img: IMG_ITEM+"baked_potato.png" },
  { name:"Fårkött", price:1, unit:"D/Stack", img: IMG_ITEM+"mutton.png" },
  { name:"Kanin", price:10, unit:"D/Stack", img: IMG_ITEM+"rabbit.png" },
  { name:"Torsk", price:1, unit:"D/Stack", img: IMG_ITEM+"cod.png" },
  { name:"Kyckling", price:1, unit:"D/Stack", img: IMG_ITEM+"chicken.png" },
  { name:"Biff", price:2, unit:"D/Stack", img: IMG_ITEM+"beef.png" },
  { name:"Fläskkotlett", price:2, unit:"D/Stack", img: IMG_ITEM+"porkchop.png" },

  // FÄRGER & ULL
  { name:"Färg Vit", price:12, unit:"D/Stack", img: IMG_ITEM+"white_dye.png" },
  { name:"Färg Ljusgrå", price:12, unit:"D/Stack", img: IMG_ITEM+"light_gray_dye.png" },
  { name:"Färg Grå", price:12, unit:"D/Stack", img: IMG_ITEM+"gray_dye.png" },
  { name:"Färg Svart", price:12, unit:"D/Stack", img: IMG_ITEM+"black_dye.png" },
  { name:"Färg Brun", price:12, unit:"D/Stack", img: IMG_ITEM+"brown_dye.png" },
  { name:"Färg Röd", price:12, unit:"D/Stack", img: IMG_ITEM+"red_dye.png" },
  { name:"Färg Orange", price:12, unit:"D/Stack", img: IMG_ITEM+"orange_dye.png" },
  { name:"Färg Gul", price:12, unit:"D/Stack", img: IMG_ITEM+"yellow_dye.png" },
  { name:"Färg Blå", price:12, unit:"D/Stack", img: IMG_ITEM+"blue_dye.png" },
  { name:"Färg Ljusblå", price:12, unit:"D/Stack", img: IMG_ITEM+"light_blue_dye.png" },
  { name:"Färg Turkos", price:12, unit:"D/Stack", img: IMG_ITEM+"cyan_dye.png" },
  { name:"Färg Lime", price:12, unit:"D/Stack", img: IMG_ITEM+"lime_dye.png" },
  { name:"Färg Grön", price:12, unit:"D/Stack", img: IMG_ITEM+"green_dye.png" },
  { name:"Färg Lila", price:12, unit:"D/Stack", img: IMG_ITEM+"purple_dye.png" },
  { name:"Färg Rosa", price:12, unit:"D/Stack", img: IMG_ITEM+"pink_dye.png" },
  { name:"Ull Vit", price:12, unit:"D/Stack", img: IMG_BLOCK+"white_wool.png" },
  { name:"Ull Ljusgrå", price:12, unit:"D/Stack", img: IMG_BLOCK+"light_gray_wool.png" },
  { name:"Ull Grå", price:12, unit:"D/Stack", img: IMG_BLOCK+"gray_wool.png" },
  { name:"Ull Svart", price:12, unit:"D/Stack", img: IMG_BLOCK+"black_wool.png" },
  { name:"Ull Brun", price:12, unit:"D/Stack", img: IMG_BLOCK+"brown_wool.png" },
  { name:"Ull Röd", price:12, unit:"D/Stack", img: IMG_BLOCK+"red_wool.png" },
  { name:"Ull Orange", price:12, unit:"D/Stack", img: IMG_BLOCK+"orange_wool.png" },
  { name:"Ull Gul", price:12, unit:"D/Stack", img: IMG_BLOCK+"yellow_wool.png" },
  { name:"Ull Blå", price:12, unit:"D/Stack", img: IMG_BLOCK+"blue_wool.png" },
  { name:"Ull Ljusblå", price:12, unit:"D/Stack", img: IMG_BLOCK+"light_blue_wool.png" },
  { name:"Ull Turkos", price:12, unit:"D/Stack", img: IMG_BLOCK+"cyan_wool.png" },
  { name:"Ull Lime", price:12, unit:"D/Stack", img: IMG_BLOCK+"lime_wool.png" },
  { name:"Ull Grön", price:12, unit:"D/Stack", img: IMG_BLOCK+"green_wool.png" },
  { name:"Ull Lila", price:12, unit:"D/Stack", img: IMG_BLOCK+"purple_wool.png" },
  { name:"Ull Rosa", price:12, unit:"D/Stack", img: IMG_BLOCK+"pink_wool.png" },

  // VÄRDESAKER
  { name:"Netherite", price:12, unit:"D/Stack", img: IMG_ITEM+"netherite_ingot.png" },
  { name:"Smaragdblock", price:2, unit:"D/16st", img: IMG_BLOCK+"emerald_block.png" },
  { name:"Järn", price:1, unit:"D/Stack", img: IMG_ITEM+"iron_ingot.png" },
  { name:"Järnblock", price:6, unit:"D/Stack", img: IMG_BLOCK+"iron_block.png" },
  { name:"Fyr", price:12, unit:"D/Styck", img: IMG_BLOCK+"beacon.png" },
  { name:"Enderkista", price:6, unit:"D/Styck", img: IMG_BLOCK+"ender_chest.png" },
  { name:"Guld", price:2, unit:"D/Stack", img: IMG_ITEM+"gold_ingot.png" },
  { name:"Guldblock", price:14, unit:"D/Stack", img: IMG_BLOCK+"gold_block.png" },
  { name:"Pärlbåtsskal", price:32, unit:"D/Stack", img: IMG_ITEM+"nautilus_shell.png" },
  { name:"Shulkerbox", price:63, unit:"D/Styck", img: IMG_ITEM+"shulker_box.png" },
  { name:"Kikare", price:64, unit:"D/Styck", img: IMG_ITEM+"spyglass.png" },
  { name:"Odödlighetstotem", price:52, unit:"D/Stack", img: IMG_ITEM+"totem_of_undying.png" },
  { name:"Koppel", price:10, unit:"D/Stack", img: IMG_ITEM+"lead.png" },
  { name:"Namnskylt", price:32, unit:"D/20st", img: IMG_ITEM+"name_tag.png" },
  { name:"Adrians Fantastiska Fireworks", price:32, unit:"D/Styck", img: IMG_ITEM+"firework_rocket.png" },

  // ANNAT
  { name:"Planter", price:1, unit:"D/Stack", img: IMG_BLOCK+"oak_sapling.png" },
  { name:"Kullersten", price:2, unit:"D/Stack", img: IMG_BLOCK+"cobblestone.png" },
  { name:"Mossig Kullersten", price:2, unit:"D/Stack", img: IMG_BLOCK+"mossy_cobblestone.png" },
  { name:"Grus", price:1, unit:"D/Stack", img: IMG_BLOCK+"gravel.png" },
  { name:"Sand", price:4, unit:"D/Stack", img: IMG_BLOCK+"sand.png" },
  { name:"Lera", price:4, unit:"D/Stack", img: IMG_BLOCK+"clay.png" },
  { name:"Obsidian", price:6, unit:"D/Stack", img: IMG_BLOCK+"obsidian.png" },
  { name:"Kolblock", price:16, unit:"D/Stack", img: IMG_BLOCK+"coal_block.png" },
  { name:"Granit", price:2, unit:"D/Stack", img: IMG_BLOCK+"granite.png" },
  { name:"Diorite", price:2, unit:"D/Stack", img: IMG_BLOCK+"diorite.png" },
  { name:"Andesite", price:2, unit:"D/Stack", img: IMG_BLOCK+"andesite.png" },
  { name:"Pilar", price:2, unit:"D/Stack", img: IMG_ITEM+"arrow.png" },
    { name:"Gräs", price:3, unit:"D/Stack", img: "Grass.png" },
  { name:"Fiskespö", price:6, unit:"D/Stack", img: IMG_ITEM+"fishing_rod.png" }
];

const productsDiv = document.getElementById("products");
const cartList = document.getElementById("cartList");
let cart = {}; // Ändrat till objekt med counts

function renderProducts(list) {
  productsDiv.innerHTML = "";
  list.forEach((p) => {
    const div = document.createElement("div");
    div.className = "product";
    div.innerHTML = `
      <img src="${p.img}" alt="${p.name}">
      <strong>${p.name}</strong>
      <p>${p.price} ${p.unit}</p>
      <button onclick="addToCart('${p.name}')">Lägg till i kundvagn</button>
    `;
    productsDiv.appendChild(div);
  });
}

renderProducts(products);

document.getElementById("search").addEventListener("input", () => {
  const query = document.getElementById("search").value.toLowerCase();
  const filtered = products.filter(p => p.name.toLowerCase().includes(query));
  renderProducts(filtered);
});

function addToCart(name) {
  if(!cart[name]) cart[name] = 1;
  else cart[name]++;
  updateCart();
}

function updateCart() {
  cartList.innerHTML = "";
  Object.keys(cart).forEach((key) => {
    const product = products.find(p => p.name === key);
    const li = document.createElement("li");
    li.innerHTML = `${key} (${cart[key]} ${product.unit}) - ${product.price}D <button onclick="removeFromCart('${key}')">❌</button>`;
    cartList.appendChild(li);
  });
}

function removeFromCart(name) {
  delete cart[name];
  updateCart();
}

function goToCheckout() {
  if(Object.keys(cart).length === 0) {
    alert("Kundvagnen är tom!");
    return;
  }
  const cartText = Object.keys(cart).map(k => `${k} (${cart[k]} ${products.find(p=>p.name===k).unit})`).join(", ");
  document.getElementById("gfProducts").value = cartText;
  document.getElementById("gfForm").submit();
}
</script>

</body>
</html>
